var baseFlatten = require('../internal/baseFlatten'),
    baseSortByOrder = require('../internal/baseSortByOrder'),
<<<<<<< HEAD
    isIterateeCall = require('../internal/isIterateeCall'),
    restParam = require('../function/restParam');

/**
 * This method is like `_.sortBy` except that it can sort by multiple iteratees
 * or property names.
 *
 * If a property name is provided for an iteratee the created `_.property`
 * style callback returns the property value of the given element.
 *
 * If an object is provided for an iteratee the created `_.matches` style
 * callback returns `true` for elements that have the properties of the given
 * object, else `false`.
=======
    isIterateeCall = require('../internal/isIterateeCall');

/**
 * This method is like `_.sortBy` except that it sorts by property names
 * instead of an iteratee function.
>>>>>>> f8417fafd5bf20d329bf2e3402fca16fd839cf1f
 *
 * @static
 * @memberOf _
 * @category Collection
 * @param {Array|Object|string} collection The collection to iterate over.
<<<<<<< HEAD
 * @param {...(Function|Function[]|Object|Object[]|string|string[])} iteratees
 *  The iteratees to sort by, specified as individual values or arrays of values.
=======
 * @param {...(string|string[])} props The property names to sort by,
 *  specified as individual property names or arrays of property names.
>>>>>>> f8417fafd5bf20d329bf2e3402fca16fd839cf1f
 * @returns {Array} Returns the new sorted array.
 * @example
 *
 * var users = [
<<<<<<< HEAD
 *   { 'user': 'fred',   'age': 48 },
 *   { 'user': 'barney', 'age': 36 },
 *   { 'user': 'fred',   'age': 42 },
 *   { 'user': 'barney', 'age': 34 }
 * ];
 *
 * _.map(_.sortByAll(users, ['user', 'age']), _.values);
 * // => [['barney', 34], ['barney', 36], ['fred', 42], ['fred', 48]]
 *
 * _.map(_.sortByAll(users, 'user', function(chr) {
 *   return Math.floor(chr.age / 10);
 * }), _.values);
 * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
 */
var sortByAll = restParam(function(collection, iteratees) {
  if (collection == null) {
    return [];
  }
  var guard = iteratees[2];
  if (guard && isIterateeCall(iteratees[0], iteratees[1], guard)) {
    iteratees.length = 1;
  }
  return baseSortByOrder(collection, baseFlatten(iteratees), []);
});
=======
 *   { 'user': 'barney', 'age': 36 },
 *   { 'user': 'fred',   'age': 40 },
 *   { 'user': 'barney', 'age': 26 },
 *   { 'user': 'fred',   'age': 30 }
 * ];
 *
 * _.map(_.sortByAll(users, ['user', 'age']), _.values);
 * // => [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]
 */
function sortByAll() {
  var args = arguments,
      collection = args[0],
      guard = args[3],
      index = 0,
      length = args.length - 1;

  if (collection == null) {
    return [];
  }
  var props = Array(length);
  while (index < length) {
    props[index] = args[++index];
  }
  if (guard && isIterateeCall(args[1], args[2], guard)) {
    props = args[1];
  }
  return baseSortByOrder(collection, baseFlatten(props), []);
}
>>>>>>> f8417fafd5bf20d329bf2e3402fca16fd839cf1f

module.exports = sortByAll;
