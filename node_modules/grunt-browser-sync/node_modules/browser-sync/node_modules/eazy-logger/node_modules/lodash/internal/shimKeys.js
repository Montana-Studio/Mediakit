var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('./isIndex'),
    isLength = require('./isLength'),
<<<<<<< HEAD
    keysIn = require('../object/keysIn');
=======
    keysIn = require('../object/keysIn'),
    support = require('../support');
>>>>>>> f8417fafd5bf20d329bf2e3402fca16fd839cf1f

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `Object.keys` which creates an array of the
 * own enumerable property names of `object`.
 *
 * @private
<<<<<<< HEAD
 * @param {Object} object The object to query.
=======
 * @param {Object} object The object to inspect.
>>>>>>> f8417fafd5bf20d329bf2e3402fca16fd839cf1f
 * @returns {Array} Returns the array of property names.
 */
function shimKeys(object) {
  var props = keysIn(object),
      propsLength = props.length,
      length = propsLength && object.length;

<<<<<<< HEAD
  var allowIndexes = !!length && isLength(length) &&
    (isArray(object) || isArguments(object));
=======
  var allowIndexes = length && isLength(length) &&
    (isArray(object) || (support.nonEnumArgs && isArguments(object)));
>>>>>>> f8417fafd5bf20d329bf2e3402fca16fd839cf1f

  var index = -1,
      result = [];

  while (++index < propsLength) {
    var key = props[index];
    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
      result.push(key);
    }
  }
  return result;
}

module.exports = shimKeys;
